import{r as e,o as t,c as s,a as r,w as o,b as n,d as a,v as l,F as i,e as d,t as c,f as u,g as p,h,i as f}from"./vendor.249676a7.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const r=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,n)=>{const a=new URL(e,r);if(self[t].moduleMap[a])return s(self[t].moduleMap[a]);const l=new Blob([`import * as m from '${a}';`,`${t}.moduleMap['${a}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){n(new Error(`Failed to import: ${e}`)),o(i)},onload(){s(self[t].moduleMap[a]),o(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/assets/");const m={},g={class:"flex flex-col justify-between h-screen"},x={class:"xl:container mx-auto text-gray-600 body-font w-full"},b={class:"mx-auto flex flex-wrap px-4 py-2 flex-row items-center"},w=r("a",{class:"flex title-font font-medium items-center text-gray-900 md:mb-0",href:"/"},[r("img",{src:"/assets/logo.b66bf2af.png",class:"w-12 h-12"}),r("span",{class:"ml-3 text-xl"},"ZonaForo MeriStation")],-1),y=r("nav",{class:"hidden sm:flex mr-auto ml-4 py-1 pl-4 border-l border-gray-400 flex-wrap items-center text-base justify-center"},[r("span",null,"In Memoriam")],-1),v={class:" mr-2 py-1 px-2  flex-wrap items-center text-base justify-center bg-yellow-500 text-white rounded-md shadow-md hover:shadow-lg text-center"},C=n(" Usuarios "),P={class:"pt-3 w-full bg-blue-100 shadow-inner pb-2"},k=r("div",{class:"h-full bg-blue-100"},null,-1);m.render=function(n,a){const l=e("router-link"),i=e("router-view");return t(),s("div",g,[r("header",x,[r("div",b,[w,y,r("nav",v,[r(l,{to:"/users",class:"text-center"},{default:o((()=>[C])),_:1})])])]),r("main",P,[r(i)]),k])};const j={data:()=>({threads:[],searchTerm:"",sortField:"publicationDate",sortAsc:!1}),mounted(){fetch("/api/index.json").then((e=>e.json())).then((e=>{this.threads=e}))},methods:{filterThreads(){return this.threads.filter((e=>e.title.toLowerCase().includes(this.searchTerm.trim().toLowerCase())||e.author.toLowerCase().includes(this.searchTerm.trim().toLowerCase()))).sort(((e,t)=>{let s=0;return s="number"==typeof t[this.sortField]?t[this.sortField]-e[this.sortField]:t[this.sortField].localeCompare(e[this.sortField]),this.sortAsc?s:-1*s}))},goToThread(e){this.$router.push(`/thread/${e}/1`)},changeSorting(e){this.sortField===e?this.sortAsc=!this.sortAsc:(this.sortField=e,this.sortAsc=!0)}}},$={class:"xl:container mx-2 xl:mx-auto"},T={class:"flex flex-wrap text-center mb-4 justify-around w-full"},L={class:"min-w-full divide-y divide-gray-200 shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},U={class:"bg-gray-50"},M={class:"divide-y divide-gray-200 text-sm bg-white"},I={class:"px-4 py-4 whitespace-nowrap"},S={class:"px-4 py-4 whitespace-nowrap"},_={class:" hidden md:block px-4 py-4 whitespace-nowrap"},A={class:"px-4 py-4 whitespace-nowrap"};j.render=function(e,o,n,u,p,h){return t(),s("div",$,[r("div",T,[a(r("input",{class:"w-full sm:w-1/2 border border-gray-400 shadow-md py-1 px-2 rounded-md","onUpdate:modelValue":o[1]||(o[1]=e=>p.searchTerm=e),placeholder:"Búsqueda por título o autor..."},null,512),[[l,p.searchTerm]])]),r("table",L,[r("thead",U,[r("tr",null,[r("th",{onClick:o[2]||(o[2]=e=>h.changeSorting("title")),scope:"col",class:"pl-3 py-3 text-left text-xs font-medium text-gray-600 uppercase cursor-pointer"}," Hilo "),r("th",{onClick:o[3]||(o[3]=e=>h.changeSorting("author")),scope:"col",class:"pl-3 py-3 text-left text-xs font-medium text-gray-600 uppercase cursor-pointer"}," Autor "),r("th",{onClick:o[4]||(o[4]=e=>h.changeSorting("publicationDate")),scope:"col",class:"pl-3 py-3 text-left text-xs font-medium text-gray-600 uppercase cursor-pointer"}," Fecha "),r("th",{onClick:o[5]||(o[5]=e=>h.changeSorting("replies")),scope:"col",class:"pl-3 py-3 text-left text-xs font-medium text-gray-600 uppercase flex cursor-pointer"}," Respuestas ")])]),r("tbody",M,[(t(!0),s(i,null,d(h.filterThreads(),(e=>(t(),s("tr",{key:e.id,class:"hover:bg-yellow-300 cursor-pointer",onClick:t=>h.goToThread(e.id)},[r("td",I,[r("p",{innerHTML:e.title},null,8,["innerHTML"])]),r("td",S,c(e.author),1),r("td",_,c(e.publicationDate.replace("T"," ").replace("Z","")),1),r("td",A,c(e.replies),1)],8,["onClick"])))),128))])])])};const H={data:()=>({thread:void 0,threadId:0,currentPage:1,chunks:[],title:"",totalPages:0}),created(){this.threadId=this.$route.params.thread,this.currentPage=parseInt(this.$route.params.page),this.getChunk()},methods:{getChunkNo(){return Math.floor((this.currentPage-1)/100)+1},getCurrentPagePosts(){const e=this.getChunkNo(),t=(this.currentPage-1)%100*15;return this.thread[String(e)].posts.slice(t,t+15)},getChunk(){const e=this.getChunkNo();this.chunks.includes(e)||fetch(`/api/${this.threadId}/chunk-${e}.json`).then((e=>e.json())).then((t=>{this.chunks.push(e),null==this.thread&&(this.thread=[],this.title=t.title,this.totalPages=t.totalPages,this.threadId=t.id),this.thread[String(e)]=t}))},getCleanContent:e=>e.replace(/<span class='ipsType_reset[^]*?<\/span>/gm,"").replace(/img([^]*?)data-src="([^]*?)"([^]*?)src="[^]*?"/gm,'img$1 $3 src="$2"').replaceAll("http://meristation.as.com/zonaforo/uploads/emoticons/default_","/emojis/")},watch:{$route:{immediate:!0,handler(e,t){this.currentPage=parseInt(e.params.page),this.threadId=e.params.thread,this.getChunk()}}}},F={key:0,class:"xl:container mx-2 xl:mx-auto rounded-md mb-4"},R={class:"flex flex-inline w-full mb-2"},z={class:"w-1/3 pr-1"},D={class:"w-1/3 px-1"},O={class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},B={class:"w-1/3 pl-1"},E={class:"text-gray-600 body-font overflow-hidden bg-white shadow-lg rounded-b-md"},N={class:"md:px-6 px-2"},Z={class:"divide-y-2 divide-gray-100"},q={class:"md:w-56 mb-2 md:mb-6 flex-shrink-0 flex flex-col w-full text-center"},V={class:"text-xl font-bold my-2 md:my-4"},G={class:"text-gray-500 text-xs"},J={class:"text-gray-500 text-xs"},K={class:"md:flex-grow md:border-l md:pl-4 md:border-gray-600"},Q={class:"text-xs text-gray-500"},W={class:"flex flex-inline w-full mt-2"},X={class:"w-1/3 pr-1"},Y={class:"w-1/3 px-1"},ee={class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},te={class:"w-1/3 pl-1"};H.render=function(n,a,l,p,h,f){const m=e("router-link");return null!=h.thread?(t(),s("div",F,[r("div",R,[r("div",z,[r(m,{to:`/thread/${h.threadId}/${h.currentPage-1}`},{default:o((()=>[r("button",{disabled:1==h.currentPage,class:"disabled:opacity-50 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-yellow-300 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"}," <<  Anterior ",8,["disabled"])])),_:1},8,["to"])]),r("div",D,[r("div",O,c(h.currentPage)+" / "+c(h.totalPages),1)]),r("div",B,[r(m,{to:`/thread/${h.threadId}/${h.currentPage+1}`},{default:o((()=>[r("button",{disabled:h.currentPage==h.totalPages,class:"disabled:opacity-50 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-yellow-300 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"}," Siguiente  >> ",8,["disabled"])])),_:1},8,["to"])])]),r("p",{class:"w-full border-b p-2 bg-yellow-300 rounded-t-md text-3xl shadow-sm",innerHTML:h.title},null,8,["innerHTML"]),r("section",E,[r("div",N,[r("div",Z,[(t(!0),s(i,null,d(f.getCurrentPagePosts(),(e=>(t(),s("div",{class:"flex flex-wrap md:flex-nowrap pb-4 md:py-4",key:e.id,id:e.id},[r("div",q,[r("p",V,c(e.author),1),r("p",G,c(e.registrationDate),1),r("p",J,c(e.numMessages)+" mensajes ",1)]),r("div",K,[r("p",Q,c(e.publicationDate.replace("T"," ").replace("Z","")),1),r("p",{class:"leading-relaxed",innerHTML:f.getCleanContent(e.content)},null,8,["innerHTML"])])],8,["id"])))),128))])])]),r("div",W,[r("div",X,[r(m,{to:`/thread/${h.threadId}/${h.currentPage-1}`},{default:o((()=>[r("button",{disabled:1==h.currentPage,class:"disabled:opacity-50 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-yellow-300 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"}," <<  Anterior ",8,["disabled"])])),_:1},8,["to"])]),r("div",Y,[r("div",ee,c(h.currentPage)+" / "+c(h.totalPages),1)]),r("div",te,[r(m,{to:`/thread/${h.threadId}/${h.currentPage+1}`},{default:o((()=>[r("button",{disabled:h.currentPage==h.totalPages,class:"disabled:opacity-50 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md bg-yellow-300 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"}," Siguiente  >> ",8,["disabled"])])),_:1},8,["to"])])])])):u("",!0)};const se={data:()=>({users:[],currentPage:1,searchText:"",pageSize:60}),created(){this.getUsers()},methods:{getUsers(){fetch("/api/users/index.json").then((e=>e.json())).then((e=>{this.users=e}))},filteredUsers(){return this.users.filter((e=>e.name.toLowerCase().includes(this.searchText.toLowerCase())))},showUsers(){return this.filteredUsers().slice(60*(this.currentPage-1),60*this.currentPage)},goToUser(e){this.$router.push(`/user/${this.hashCode(e)}`)},hashCode(e){var t,s=0;if(0===e.length)return s;for(t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t),s|=0;return s}},watch:{searchText(){this.currentPage=1}}},re={class:"xl:container mx-2 xl:mx-auto rounded-md mb-4 justify-center"},oe={class:"w-full text-center my-2"},ne={class:"flex flex-inline w-full my-2"},ae={class:"w-1/3 pr-1"},le={class:"w-1/3 px-1"},ie={class:"\n            group\n            relative\n            w-full\n            flex\n            justify-center\n            py-2\n            px-4\n            border border-transparent\n            text-sm\n            font-medium\n            rounded-md\n            bg-yellow-300\n            focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\n          "},de={class:"w-1/3 pl-1"},ce={class:"flex flex-wrap"},ue={class:"text-2xl text-clip"},pe={class:"text-sm"},he={class:"text-sm"};se.render=function(e,o,n,u,p,h){return t(),s("div",re,[r("div",oe,[a(r("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>p.searchText=e),class:"w-1/2 rounded-md shadow-md p-2 text-gray-500",placeholder:"Búsqueda de usuario"},null,512),[[l,p.searchText]])]),r("div",ne,[r("div",ae,[r("button",{onClick:o[2]||(o[2]=e=>p.currentPage--),disabled:1==p.currentPage,class:"\n            disabled:opacity-50\n            group\n            relative\n            w-full\n            flex\n            justify-center\n            py-2\n            px-4\n            border border-transparent\n            text-sm\n            font-medium\n            rounded-md\n            bg-yellow-300\n            hover:bg-yellow-400\n            focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\n          "}," <<  Anterior ",8,["disabled"])]),r("div",le,[r("div",ie,c(p.currentPage)+" / "+c(Math.floor(h.filteredUsers().length/p.pageSize)+1),1)]),r("div",de,[r("button",{disabled:p.currentPage==Math.floor(h.filteredUsers().length/p.pageSize)+1,onClick:o[3]||(o[3]=e=>p.currentPage++),class:"\n            disabled:opacity-50\n            group\n            relative\n            w-full\n            flex\n            justify-center\n            py-2\n            px-4\n            border border-transparent\n            text-sm\n            font-medium\n            rounded-md\n            bg-yellow-300\n            hover:bg-yellow-400\n            focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\n          "}," Siguiente  >> ",8,["disabled"])])]),r("div",ce,[(t(!0),s(i,null,d(h.showUsers(),(e=>(t(),s("div",{key:e.name,class:"w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6"},[r("div",{class:"py-2 m-2 shadow-md border border-gray-200 rounded-md text-center bg-white cursor-pointer hover:shadow-lg",onClick:t=>h.goToUser(e.name)},[r("p",ue,c(e.name),1),r("p",pe,c(e.date),1),r("p",he,c(e.messages),1)],8,["onClick"])])))),128))])])};const fe={data:()=>({user:void 0,userInfo:void 0}),created(){this.user=this.$route.params.user,this.getUser()},methods:{getUser(){fetch(`/api/users/${this.user}.json`).then((e=>e.json())).then((e=>{this.userInfo=e}))},getCleanContent:e=>e.replace(/<span class='ipsType_reset[^]*?<\/span>/gm,"").replace(/img([^]*?)data-src="([^]*?)"([^]*?)src="[^]*?"/gm,'img$1 $3 src="$2"').replaceAll("http://meristation.as.com/zonaforo/uploads/emoticons/default_","/emojis/")}},me={class:"xl:container mx-2 xl:mx-auto rounded-md mb-4 justify-center"},ge={key:0},xe={class:"w-full"},be={class:"text-3xl bg-white p-4 rounded-md shadow-md w-max"},we={key:0,class:"w-full bg-white rounded-md shadow-md px-4 py-2 mt-2"},ye=r("h2",{class:"text-xl border-b border-gray-200 mb-2"},"Hilos creados",-1),ve={class:"px-4 hover:bg-yellow-50 rounded-md p-4"},Ce={class:"text-lg"},Pe={class:"text-xs"},ke={key:1,class:"w-full bg-white rounded-md shadow-md px-4 py-2 mt-2"},je=r("h2",{class:"text-xl border-b border-gray-200 mb-2"},"Posts",-1),$e={class:"px-4 hover:bg-yellow-50 rounded-md p-4"},Te={class:"text-lg"},Le={class:"text-xs pl-3"},Ue={class:"text-xs"};fe.render=function(n,a,l,p,h,f){const m=e("router-link");return t(),s("div",me,[null!=h.userInfo?(t(),s("div",ge,[r("div",xe,[r("h1",be,c(h.userInfo.name),1)]),h.userInfo.threads.length>0?(t(),s("div",we,[ye,(t(!0),s(i,null,d(h.userInfo.threads,(e=>(t(),s("div",{key:e.id},[r(m,{to:`/thread/${e.thread}/1`},{default:o((()=>[r("div",ve,[r("p",Ce,c(e.title),1),r("div",Pe,[r("p",{class:"pl-4 -mt-4",innerHTML:f.getCleanContent(e.content)},null,8,["innerHTML"])])])])),_:2},1032,["to"])])))),128))])):u("",!0),h.userInfo.posts.length>0?(t(),s("div",ke,[je,(t(!0),s(i,null,d(h.userInfo.posts,(e=>(t(),s("div",{key:e.id,class:"border-b border-gray-200"},[r(m,{to:`/thread/${e.thread}/${e.page}#${e.id}`},{default:o((()=>[r("div",$e,[r("p",Te,c(e.title),1),r("p",Le,c(e.date),1),r("div",Ue,[r("p",{class:"p-4 bg-gray-50 rounded-md",innerHTML:f.getCleanContent(e.content)},null,8,["innerHTML"])])])])),_:2},1032,["to"])])))),128))])):u("",!0)])):u("",!0)])};const Me=[{path:"/",name:"Home",component:j},{path:"/thread/:thread/:page",name:"Hilo",component:H},{path:"/users",name:"Usuarios",component:se},{path:"/user/:user",name:"Usuario",component:fe}],Ie=p({history:h(),routes:Me});String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)}),f(m).use(Ie).mount("#app");
